(this["webpackJsonptodo-machine"]=this["webpackJsonptodo-machine"]||[]).push([[0],{23:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n.n(c),a=n(9),r=n.n(a),s=(n(23),n(6)),l=n(5),i=n(0);function d(){return Object(i.jsxs)("button",{className:"btn btn-blue","data-bs-toggle":"modal","data-bs-target":"#exampleModal",children:[Object(i.jsx)("span",{className:"mr-3",children:"Nuevo "}),Object(i.jsx)(s.a,{icon:l.b})]})}function u(e){var t=e.completedTodos,n=e.allTodos,c=e.loading;return Object(i.jsx)("div",{className:"row",children:Object(i.jsxs)("div",{className:"col-12 col-md-6 offset-md-3 d-flex align-items-center justify-content-between",children:[Object(i.jsxs)("h2",{className:"my-5 ".concat(!!c&&"Todo-counter--loading"," "),children:["Has completado ",t," de ",n," TODOs"]}),Object(i.jsx)(d,{})]})})}n(30);function j(e){var t=e.searchValue,n=e.setSearchValue,c=e.loading;return Object(i.jsx)("section",{className:"container mb-4",children:Object(i.jsx)("div",{className:"row",children:Object(i.jsx)("div",{className:"col-12 col-md-6 offset-md-3",children:Object(i.jsx)("input",{className:"form-control",type:"text",placeholder:"Buscar TO-DO",value:t,onChange:function(e){n(e.target.value)},disabled:c})})})})}function m(e){var t=e.error,n=e.onError,c=e.loading,o=e.onLoading,a=e.searchedtodos,r=e.onEmpty,s=e.render,l=e.allTodos,d=e.searchText,u=e.onEmptyResult;return Object(i.jsx)("section",{className:"container",children:Object(i.jsx)("div",{className:"row",children:Object(i.jsxs)("div",{className:"col-12 col-md-6 offset-md-3",children:[t&&n(),c&&o(),!c&&!l&&r(),!!l&&!a.length&&u(d),!c&&Object(i.jsx)("ul",{className:"m-0 p-0",children:a.map(s)})]})})})}n(31);function b(e){return Object(i.jsxs)("li",{className:"Todo-Item",children:[Object(i.jsx)(s.a,{className:"icon ".concat(e.complete?"text-success":"text-muted"," "),icon:l.a,onClick:e.onComplete}),Object(i.jsx)("span",{className:"".concat(e.complete&&"text-decoration-line-through"),children:e.text}),Object(i.jsx)(s.a,{className:"text-danger icon float-end",icon:l.c,onClick:e.onDelete})]})}function f(e){var t=e.children,n=e.loading;return Object(i.jsx)("header",{className:"container",children:o.a.Children.toArray(t).map((function(e){return o.a.cloneElement(e,{loading:n})}))})}var h=n(4),O=n(15);function x(e){var t=e.addTodo,n=e.modalRef,c=o.a.useState(""),a=Object(h.a)(c,2),r=a[0],s=a[1];return Object(i.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(r);var c=n.current;O.Modal.getInstance(c).hide(),s("")},children:[Object(i.jsx)("div",{className:"mb-3",children:Object(i.jsx)("textarea",{className:"form-control",id:"nuevo-todo",rows:"3",value:r,placeholder:"Ir al cine a las 8:00",onChange:function(e){s(e.target.value)}})}),Object(i.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Guardar"})]})}function p(){return Object(i.jsx)("p",{children:"Ocurri\xf3 un error..."})}function g(){return Object(i.jsx)("p",{children:"Estamos cargando..."})}function v(){return Object(i.jsx)("p",{children:"Cree tu primer todo!"})}function N(e){return r.a.createPortal(Object(i.jsx)("div",{className:"modal fade",id:"exampleModal",tabIndex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:e.reference,children:Object(i.jsx)("div",{className:"modal-dialog",children:Object(i.jsxs)("div",{className:"modal-content",children:[Object(i.jsxs)("div",{className:"modal-header",children:[Object(i.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:e.title?e.title:""}),Object(i.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(i.jsx)("div",{className:"modal-body",children:e.children})]})})}),document.querySelector("#modal"))}var T=n(11),y=n(3);function S(e,t){var n={item:t,loading:!0,error:!1,sincronizedItem:!0},c="ERROR",a="SUCCESS",r="SAVE",s="SINCRONIZE",l=o.a.useReducer((function(e,t){switch(t.type){case c:return Object(y.a)(Object(y.a)({},e),{},{error:!0});case a:return Object(y.a)(Object(y.a)({},e),{},{error:!1,loading:!1,sincronizedItem:!0,item:t.payload});case r:return Object(y.a)(Object(y.a)({},e),{},{item:t.payload});case s:return Object(y.a)(Object(y.a)({},e),{},{loading:!0,sincronizedItem:!1})}}),n),i=Object(h.a)(l,2),d=i[0],u=i[1],j=d.item,m=d.loading,b=d.error,f=d.sincronizedItem;o.a.useEffect((function(){setTimeout((function(){try{var n,o=localStorage.getItem(e);o?n=JSON.parse(o):(localStorage.setItem(e,JSON.stringify(t)),n=t),function(e){u({type:a,payload:e})}(n)}catch(b){u({type:c})}}),1e3)}),[f]);return{item:j,saveItem:function(t){localStorage.setItem(e,JSON.stringify(t)),function(e){u({type:r,payload:e})}(t)},loading:m,error:b,sincronizeItem:function(){u({type:s})}}}function I(e){var t=function(e){var t=o.a.useState(!1),n=Object(h.a)(t,2),c=n[0],a=n[1];return window.addEventListener("storage",(function(e){"TODOS_V1"===e.key&&a(!0)})),{show:c,toggleShow:function(){e(),a(!1)}}}(e.sincronize),n=t.show,c=t.toggleShow;return n?Object(i.jsx)("section",{className:"container",children:Object(i.jsx)("div",{className:"row",children:Object(i.jsx)("div",{className:"col-12 col-md-6 offset-3",children:Object(i.jsxs)("div",{className:"alert alert-success",role:"alert",children:[Object(i.jsx)("p",{children:"Hubo Cambios"}),Object(i.jsx)("button",{className:"btn btn-success",onClick:function(){return c()},children:"Volver a cargar la informaci\xf3n"})]})})})}):null}var w=function(){var e=function(){var e=S("TODOS_V1",[]),t=e.item,n=e.saveItem,c=e.loading,a=e.error,r=e.sincronizeItem,s=o.a.useState(""),l=Object(h.a)(s,2),i=l[0],d=l[1],u=o.a.createRef(null),j=t.filter((function(e){return!!e.complete})).length,m=t.length,b=t.filter((function(e){return e.text.toLowerCase().includes(i.toLowerCase())}));return{loading:c,error:a,completedTodos:j,allTodos:m,searchValue:i,setSearchValue:d,searchedtodos:b,completeTodo:function(e){var c=t.findIndex((function(t){return t.id===e})),o=Object(T.a)(t);o[c].complete=!o[c].complete,n(o)},deleteTodo:function(e){var c=t.findIndex((function(t){return t.id===e})),o=Object(T.a)(t);o.splice(c,1),n(o)},addTodo:function(e){var c,o=Object(T.a)(t);c=o.length>0?o.reduce((function(e,t){return e.id>t.id?e.id:t.id})):1,o.push({id:c+1,complete:!1,text:e}),n(o)},modalRef:u,sincronizeTodo:r}}(),t=e.error,n=e.loading,c=e.searchedtodos,a=e.completeTodo,r=e.deleteTodo,s=e.modalRef,l=e.completedTodos,d=e.allTodos,O=e.searchValue,y=e.setSearchValue,w=e.addTodo,C=e.sincronizeTodo;return Object(i.jsxs)(o.a.Fragment,{children:[Object(i.jsxs)(f,{loading:n,children:[Object(i.jsx)(u,{completedTodos:l,allTodos:d}),Object(i.jsx)(j,{searchValue:O,setSearchValue:y})]}),Object(i.jsx)(m,{error:t,loading:n,searchedtodos:c,allTodos:d,searchText:O,onError:function(){return Object(i.jsx)(p,{})},onLoading:function(){return Object(i.jsx)(g,{})},onEmpty:function(){return Object(i.jsx)(v,{})},onEmptyResult:function(e){return Object(i.jsxs)("p",{children:["No hay resultados para ",e]})},render:function(e){return Object(i.jsx)(b,{complete:e.complete,text:e.text,onComplete:function(){return a(e.id)},onDelete:function(){return r(e.id)}},e.id)}}),Object(i.jsx)(N,{reference:s,title:"Crear nuevo To-do",children:Object(i.jsx)(x,{addTodo:w,modalRef:s})}),Object(i.jsx)(I,{sincronize:C})]})};n(53),n(54);r.a.render(Object(i.jsx)(w,{}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.eabd16f5.chunk.js.map